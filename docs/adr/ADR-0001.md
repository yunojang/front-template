# ADR-0001 – 상태 관리: React Query + Zustand

- 상태: Accepted
- 날짜: 2025-01-20

## 문제

프로젝트는 배급자·번역가 역할에 따라 다양한 화면 상태를 가지며, 서버에서 제공하는 프로젝트/편집 데이터와 클라이언트 전역 UI 상태를 모두 다뤄야 한다. 초보 팀이 학습 비용을 낮추면서도 확장 가능한 구조가 필요하다.

## 의사결정

- **서버 상태**: `@tanstack/react-query`
  - 쿼리 캐싱, 자동 재시도, 로딩/에러 상태 관리가 내장되어 있음
  - `queryKey` 규칙으로 API 계약을 문서화하고 프리패치를 제공
- **전역 상태**: `zustand`
  - 보일러플레이트가 적고 `create` API로 간단히 스토어를 구축 가능
  - `devtools` 미들웨어로 상태 디버깅 학습을 지원
- 두 상태 관리 도구를 혼합하지 않고 역할을 명확히 분리

## 고려했던 대안

1. Redux Toolkit 단독 사용
   - Pros: 단일 도구로 일원화 가능, 미들웨어 생태계 풍부
   - Cons: 초보 팀에게는 보일러플레이트와 개념 학습 부담이 큼
2. React Query + Context API
   - Pros: 추가 라이브러리 없이 구현 가능
   - Cons: Context 재렌더 비용, 모달/토스트 등 UI 상태 관리를 수동으로 구현해야 함

## 결과

- `useProjects`, `useProject`, `useEditorState` 등 React Query 훅을 도입
- `useAuthStore`, `useUiStore`, `useEditorStore` 등 Zustand 스토어 예시 제공
- 팀 가이드라인에 “서버 상태 ↔ 전역 상태를 구분” 규칙을 추가

## 추적 항목

- Mutation 패턴(optimistic update 등) 연구 필요
- Zustand 스토어의 persist/middleware 활용 여부는 실제 기능 연동 이후 재검토
